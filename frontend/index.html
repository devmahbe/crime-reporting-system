<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="src/css/base.css">
    <link rel="stylesheet" href="src/css/i18n.css">
    <link rel="stylesheet" href="src/css/enhanced-header.css"> <!-- Fixed: baseenhanced-header.css -> enhanced-header.css -->
    <link rel="stylesheet" href="src/css/footer.css">
    <link rel="stylesheet" href="src/css/homepage-style.css">
    <link rel="stylesheet" href="src/css/homepage-responsive.css">
    <link rel="stylesheet" href="src/css/auth-header.css">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <!-- Map Styles -->
    <link rel="stylesheet" href="src/css/map.css">

</head>
<body>

<!-- Start: Header -->
    <header>
        <div class="container">
            <div class="header-contents">
                <div class="logo">
                    <a href="/">
                        <div class="logo-text">SecureVoice</div>
                         <div class="logo-subtitle">Crime Reporting System</div>
                    </a>
                </div>
                <div class="navigation">
                   <!-- In your header navigation section, replace the navigation-menu with: -->
<ul class="navigation-menu">
    <button id="menu-close-btn" class="fas fa-times"></button>
    <li class="navigation-item navigation-active">
        <a href="/" class="navigation-link navigation-link-active" data-i18n="nav.home">Home</a>
    </li>
    <li class="navigation-item">
        <a href="#how-it-works" class="navigation-link" data-i18n="nav.howItWorks">How It Works</a>
    </li>
    <li class="navigation-item">
        <a href="#cases-section" class="navigation-link" data-i18n="nav.casesWeHandle">Cases We Handle</a>
    </li>
    <li class="navigation-item">
        <a href="#track-anonymous-report" class="navigation-link" data-i18n="nav.trackReport">Track Report</a>
    </li>
    <li class="navigation-item">
        <a href="src/pages/contact-us.html" class="navigation-link" data-i18n="nav.contactUs">Contact Us</a>
    </li>
</ul>
                    <button id="menu-open-btn" class="fas fa-bars"></button>
                </div>
                <div class="header-icons">
                    <button class="lang-toggle-btn header-lang-toggle compact" title="Switch Language">EN</button>
                    <a href="src/pages/login.html" class="icon-items user">
                        <div class="icon-border">
                            <i class="fa-solid fa-user"></i>
                        </div>
                        <span data-i18n="nav.user">User</span>
                    </a>
                    <!-- <a href="src/pages/adminLogin.html" class="icon-items admin"> 
                        <div class="icon-border">
                            <i class="fa-solid fa-user-tie"></i>
                        </div>
                        <span>Admin</span>
                    </a> -->
                </div>
            </div>
        </div>
    </header>
<!-- End: Header -->

<!-- Start: Map Section -->
<section class="map-section">
    <div class="map-container">
        <div id="map"></div>
        
        <!-- Map Controls -->
        <div class="map-controls">
            <button id="locateMe" class="map-btn">
                <i class="fas fa-location-arrow"></i>
                <span data-i18n="map.findMyLocation">Find My Location</span>
            </button>
            <button id="resetView" class="map-btn">
                <i class="fas fa-sync-alt"></i>
                <span data-i18n="map.resetView">Reset View</span>
            </button>
            <button id="toggleHeatmap" class="map-btn">
                <i class="fas fa-fire"></i>
                <span data-i18n="map.crimeHeatmap">Crime Heatmap</span>
            </button>
            <button id="toggleMarkers" class="map-btn">
                <i class="fas fa-map-pin"></i>
                <span data-i18n="map.divisionMarkers">Division Markers</span>
            </button>
        </div>
        
        <div class="report-crime-btn-container">
            <button id="anonymous-report-btn" class="anonymous-report-btn" onclick="handleAnonymousReport()">
                <i class="fa-solid fa-user-secret"></i>
                <span data-i18n="btn.anonymousReport">Anonymous Report</span>
            </button>
        </div>
        
        <!-- Heatmap Info Panel -->
        <div id="heatmapInfo" class="heatmap-info" style="display: none;">
            <div class="heatmap-legend">
                <h4><i class="fas fa-fire"></i> <span data-i18n="map.crimeHeatmap">Crime Heat Map</span></h4>
                <div class="legend-items">
                    <div class="legend-item">
                        <div class="legend-color high"></div>
                        <span data-i18n="map.highActivity">High Activity</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color medium"></div>
                        <span data-i18n="map.mediumActivity">Medium Activity</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color low"></div>
                        <span data-i18n="map.lowActivity">Low Activity</span>
                    </div>
                </div>
                <div class="heatmap-stats">
                    <div id="totalComplaints" class="stat-item">
                        <strong>0</strong> <span data-i18n="map.totalReports">Total Reports</span>
                    </div>
                    <div id="pendingComplaints" class="stat-item">
                        <strong>0</strong> <span data-i18n="map.pending">Pending</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Map Information Cards -->

</section>
<!-- End: Map Section -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<!-- Leaflet Heatmap Plugin -->
<script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>

<script src="src/js/map.js"></script>

<!-- Start: Track Anonymous Report Section -->
<section id="track-anonymous-report">
    <div class="container">
        <div class="track-report-content">
            <div class="track-report-header">
                <div class="track-icon">
                    <i class="fas fa-search-location"></i>
                </div>
                <h2 data-i18n="track.title">Track Your Anonymous Report</h2>
                <p data-i18n="track.description">Already submitted an anonymous report? Enter your Report ID to check its current status.</p>
            </div>
            
            <div class="track-report-form">
                <div class="input-group">
                    <i class="fas fa-hashtag"></i>
                    <input type="text" id="trackReportId" data-i18n-placeholder="track.placeholder" placeholder="Enter Report ID (e.g., SV-XXXXXXXX)" maxlength="20">
                    <button id="trackReportBtn" class="track-btn">
                        <i class="fas fa-search"></i>
                        <span data-i18n="btn.trackStatus">Track Status</span>
                    </button>
                </div>
                <p class="track-hint">
                    <i class="fas fa-info-circle"></i>
                    <span data-i18n="track.hint">Your Report ID was provided when you submitted your anonymous report. Keep it safe!</span>
                </p>
            </div>
            
            <!-- Status Result Container -->
            <div id="trackResult" class="track-result hidden">
                <div class="result-content">
                    <!-- Results will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>
</section>
<!-- End: Track Anonymous Report Section -->

<!-- Start: How it works -->
<section id="how-it-works">
    <div class="container">
        <h1 class="title" data-i18n="howItWorks.title">How It Works</h1>
        <p class="para" data-i18n="howItWorks.description">Our platform makes it easy to report crimes and track their investigation progress.</p>
        <div class="card-container">
            <div class="card">
                <div class="icon-circle">
                    <i class="fa-regular fa-circle-user"></i>
                </div>
                <a href="src/pages/login.html" data-i18n="howItWorks.step1.title">Create an Account</a>
                <p data-i18n="howItWorks.step1.desc">Sign up with your personal details to create a secure account for reporting crimes.</p>
            </div>
            <div class="card">
                <div class="icon-circle">
                    <i class="fas fa-file-alt"></i>
                </div>
                <a href="/profile?tab=new-report" data-i18n="howItWorks.step2.title">Submit a Complaint</a>
                <p data-i18n="howItWorks.step2.desc">Provide details about the incident, including location, time, and any evidence you may have.</p>
            </div>
            <div class="card">
                <div class="icon-circle">
                    <i class="fa-solid fa-chart-simple"></i>
                </div>
                <a href="#" data-i18n="howItWorks.step3.title">Track Progress</a>
                <p data-i18n="howItWorks.step3.desc">Monitor the status of your complaint as it moves through verification, investigation, and resolution.</p>
            </div>
        </div>
    </div>
</section>
<!-- End: How it works -->

<!-- Start: Cases Section -->
<section id="cases-section">
    <div class="container">
        <h1 class="title" data-i18n="cases.title">Cases We Handle</h1>
        <p class="para" data-i18n="cases.description">We handle a wide range of criminal complaints with utmost care and confidentiality.</p>

        <div class="cases-grid">
            <div class="case-type-card">
                <div class="case-icon">
                    <i class="fas fa-user-shield"></i>
                </div>
                <h3 data-i18n="cases.personalSafety">Personal Safety</h3>
                <p data-i18n="cases.personalSafety.desc">Harassment, assault, domestic violence, stalking, and threats to personal safety. We ensure your voice is heard and action is taken promptly.</p>
            </div>

            <div class="case-type-card">
                <div class="case-icon">
                    <i class="fas fa-home"></i>
                </div>
                <h3 data-i18n="cases.propertyCrimes">Property Crimes</h3>
                <p data-i18n="cases.propertyCrimes.desc">Theft, burglary, vandalism, property damage, and trespassing. Report property-related incidents with detailed evidence support.</p>
            </div>

            <div class="case-type-card">
                <div class="case-icon">
                    <i class="fas fa-credit-card"></i>
                </div>
                <h3 data-i18n="cases.financialFraud">Financial Fraud</h3>
                <p data-i18n="cases.financialFraud.desc">Online scams, identity theft, credit card fraud, and financial crimes.</p>
            </div>

            <div class="case-type-card">
                <div class="case-icon">
                    <i class="fas fa-globe"></i>
                </div>
                <h3 data-i18n="cases.cyberCrimes">Cyber Crimes</h3>
                <p data-i18n="cases.cyberCrimes.desc">Online harassment, cyberbullying, hacking, data breaches, and digital threats.</p>
            </div>

            <div class="case-type-card">
                <div class="case-icon">
                    <i class="fas fa-car"></i>
                </div>
                <h3 data-i18n="cases.trafficViolations">Traffic Violations</h3>
                <p data-i18n="cases.trafficViolations.desc">Reckless driving, hit-and-run incidents, traffic accidents, and road rage. Quick response and proper documentation.</p>
            </div>

            <div class="case-type-card">
                <div class="case-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3 data-i18n="cases.publicSafety">Public Safety</h3>
                <p data-i18n="cases.publicSafety.desc">Public disturbances, noise complaints. Building safer neighborhoods together.</p>
            </div>
        </div>

        <div class="security-features">
            <h3 data-i18n="security.title">How We Ensure Secure Complaints</h3>
            <p data-i18n="security.description">Your safety and privacy are our top priorities. We use advanced security measures to protect your identity and information.</p>
            
            <div class="security-grid">
                <div class="security-row">
                    <div class="security-item">
                        <i class="fas fa-lock"></i>
                        <h4 data-i18n="security.encryption">End-to-End Encryption</h4>
                        <p data-i18n="security.encryption.desc">Military-grade security protocols</p>
                    </div>
                    <div class="security-item">
                        <i class="fas fa-user-secret"></i>
                        <h4 data-i18n="security.anonymous">Anonymous Reporting</h4>
                        <p data-i18n="security.anonymous.desc">Complete anonymity option</p>
                    </div>
                </div>
                
                <div class="security-row">
                    <div class="security-item">
                        <i class="fas fa-shield-alt"></i>
                        <h4 data-i18n="security.storage">Secure Storage</h4>
                        <p data-i18n="security.storage.desc">Protected servers with backups</p>
                    </div>
                    <div class="security-item">
                        <i class="fas fa-eye-slash"></i>
                        <h4 data-i18n="security.privacy">Privacy Protection</h4>
                        <p data-i18n="security.privacy.desc">Strict confidentiality policies</p>
                    </div>
                </div>
                
                <div class="security-row">
                    <div class="security-item">
                        <i class="fas fa-clock"></i>
                        <h4 data-i18n="security.monitoring">24/7 Monitoring</h4>
                        <p data-i18n="security.monitoring.desc">Round-the-clock security</p>
                    </div>
                    <div class="security-item">
                        <i class="fas fa-certificate"></i>
                        <h4 data-i18n="security.verified">Verified Officials</h4>
                        <p data-i18n="security.verified.desc">Authenticated law enforcement</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- End: Cases Section -->

<!-- Start: Explore Us -->
    <div class="explore-us">
        <video autoplay muted loop playsinline class="explore-us-video">
            <source src="public/videos/explore-us.mp4" type="video/mp4">
            If the video is not showing, then it might be because your browser is outdated. please update it to view this video.
        </video>
        <div class="explore-us-content">
            <a href="#" class="explore-us-btn" data-i18n="btn.exploreUs">Explore Us</a>
        </div>
    </div>
<!-- End: Explore Us -->

<!-- Start: Ready to get started -->
    <section id="ready-to-get-started">
        <div class="container">
            <div class="rtgs-area">
                <h1 class="title" data-i18n="getStarted.title">Ready to Get Started?</h1>
                <p class="para" data-i18n="getStarted.description">Join our platform today to report incidents to help make your community safer.</p>
                <div class="buttons">
                    <a href="src/pages/login.html" class="btn" data-i18n="btn.createAccount">Create an account</a>
                </div>
            </div>
        </div>
    </section>
<!-- End: Ready to get started -->

<!-- Start: Footer -->
    <footer id="footer">
        <div class="container">
            <div class="footer-container">
                <div class="footer-main">
                    <div class="footer-logo">
                        <img src="images/secureVOICE-logo.png" alt="secureVOICE-logo" class="floating-logo">
                        <p class="footer-title">SECURE VOICE</p>
                    </div>
                    <div class="footer-links">
                        <h4 data-i18n="footer.links">LINKS</h4>
<ul class="footer-nav">
    <li class="footer-nav-items active">
        <a href="/" class="footer-nav-links active" data-i18n="nav.home">Home</a>
    </li>
    <li class="footer-nav-items">
        <a href="#how-it-works" class="footer-nav-links" data-i18n="nav.howItWorks">How It Works</a>
    </li>
    <li class="footer-nav-items">
    </li>
    <li class="footer-nav-items">
        <a href="#ready-to-get-started" class="footer-nav-links" data-i18n="nav.aboutUs">About Us</a>
    </li>
    <li class="footer-nav-items">
        <a href="src/pages/contact-us.html" class="footer-nav-links" data-i18n="nav.contactUs">Contact Us</a>
    </li>
</ul>
                    </div>
                    <div class="footer-contact">
                        <h4 data-i18n="footer.contact">CONTACT</h4>
                        <ul class="footer-contact-info">
                            <div class="contact">
                                <i class="fas fa-map-marker-alt"></i>
                                <li data-i18n="footer.location">Dhaka, Bangladesh</li>
                            </div>
                            <div class="contact">
                                <i class="fas fa-envelope"></i>
                                <li>securevoice05@gmail.com</li>
                            </div>
                            <div class="contact">
                                <i class="fas fa-phone-alt"></i>
                                <li>+880-123-456-7890</li>
                            </div>
                            <div class="contact">
                                <i class="fas fa-clock"></i>
                                <li data-i18n="footer.open24">Open 24/7</li>
                            </div>
                        </ul>
                    </div>
                </div>
                <div class="footer-meta">
                    <div class="footer-copy">
                        <div class="copyright-title">
                            <i class="fas fa-shield-alt"></i>
                            <span data-i18n="brand.tagline">Crime Reporting System</span>
                        </div>
                        <div class="copyright-text">
                            <span data-i18n="footer.copyright">
                                &copy; 2025, Secure Voice - Crime Reporting System. All rights reserved.
                            </span>
                        </div>
                    </div>
                    <div class="footer-social">
                        <div class="social-area">
                            <a href="https://facebook.com" target="_blank"><i class="fab fa-facebook-f"></i></a>
                        </div>
                        <div class="social-area">
                            <a href="https://linkedin.com" target="_blank"><i class="fab fa-linkedin-in"></i></a>
                        </div>
                        <div class="social-area">
                            <a href="https://youtube.com" target="_blank"><i class="fab fa-youtube"></i></a>
                        </div>
                        <div class="social-area">
                            <a href="mailto:info@securevoice.com"><i class="fas fa-envelope"></i></a>
                        </div>
                        <div class="social-area">
                            <a href="https://github.com/devmahbe/DBMS-Project-Spring-25" target="_blank"><i class="fab fa-github"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
<!-- End: Footer -->

<script>
    window.addEventListener('scroll', function() {
        const header = document.querySelector('header');
        if (window.scrollY > 100) {
            header.classList.add('scrolled');
        } else {
            header.classList.remove('scrolled');
        }
    });
</script>

<script src="src/js/core/config.js"></script>
<script src="src/js/core/i18n.js"></script>
<script src="src/js/pages/homepage.js"></script>
<script src="src/js/core/navigation.js"></script>
<script src="src/js/core/user-auth.js" defer></script>
<script src="src/js/core/admin-auth.js" defer></script>
<script>
    // Handle Report a Crime button click
    function handleReportCrime() {
        // Redirect to the unified complaint form in profile page
        window.location.href = '/profile?tab=new-report';
    }
    
    // Handle Anonymous Report button click
    function handleAnonymousReport() {
        // Redirect to the anonymous report page
        window.location.href = 'src/pages/anonymous-report.html';
    }
    
    // ======================
    // TRACK ANONYMOUS REPORT
    // ======================
    document.addEventListener('DOMContentLoaded', function() {
        const trackInput = document.getElementById('trackReportId');
        const trackBtn = document.getElementById('trackReportBtn');
        const trackResult = document.getElementById('trackResult');
        
        if (!trackInput || !trackBtn || !trackResult) return;
        
        // Get API URL
        const getApiUrl = () => {
            const hostname = window.location.hostname;
            const port = window.location.port;
            if (['3000', '3001', '5000'].includes(port)) {
                return '';
            }
            return `http://${hostname}:3000`;
        };
        
        // Format crime type
        const formatCrimeType = (type) => {
            if (!type) return 'N/A';
            return type.split('_').map(word => 
                word.charAt(0).toUpperCase() + word.slice(1)
            ).join(' ');
        };
        
        // Format status
        const formatStatus = (status) => {
            const statusMap = {
                'pending': 'Pending Review',
                'reviewing': 'Under Review',
                'reviewed': 'Reviewed',
                'investigating': 'Under Investigation',
                'resolved': 'Resolved',
                'dismissed': 'Dismissed'
            };
            return statusMap[status] || status;
        };
        
        // Format date
        const formatDate = (dateStr) => {
            if (!dateStr) return 'N/A';
            return new Date(dateStr).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        };
        
        // Handle Enter key
        trackInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                trackBtn.click();
            }
        });
        
        // Auto-format input
        trackInput.addEventListener('input', (e) => {
            e.target.value = e.target.value.toUpperCase();
        });
        
        // Track button click
        trackBtn.addEventListener('click', async () => {
            const reportId = trackInput.value.trim().toUpperCase();
            
            // Validate format
            if (!reportId || !reportId.match(/^SV-[A-Z0-9]+$/)) {
                showError('Please enter a valid Report ID (e.g., SV-XXXXXXXX)');
                return;
            }
            
            // Show loading state
            trackBtn.disabled = true;
            trackBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> <span>Searching...</span>';
            
            try {
                const apiUrl = getApiUrl();
                const response = await fetch(`${apiUrl}/anonymous-report/${reportId}/status`);
                const data = await response.json();
                
                if (data.success && data.report) {
                    showSuccess(data.report);
                } else {
                    showError(data.message || 'Report not found. Please check your Report ID and try again.');
                }
            } catch (error) {
                console.error('Track error:', error);
                showError('Unable to check status. Please try again later.');
            } finally {
                trackBtn.disabled = false;
                trackBtn.innerHTML = '<i class="fas fa-search"></i> <span>Track Status</span>';
            }
        });
        
        // Show success result
        function showSuccess(report) {
            trackResult.classList.remove('hidden');
            trackResult.querySelector('.result-content').className = 'result-content success';
            trackResult.querySelector('.result-content').innerHTML = `
                <div class="result-header">
                    <h3><i class="fas fa-file-alt"></i> Report Found</h3>
                    <button class="close-result" onclick="document.getElementById('trackResult').classList.add('hidden')">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="result-grid">
                    <div class="result-item">
                        <span class="label">Report ID</span>
                        <span class="value report-id">${escapeHtml(report.reportId)}</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Crime Type</span>
                        <span class="value">${formatCrimeType(report.crimeType)}</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Submitted</span>
                        <span class="value">${formatDate(report.submittedAt)}</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Status</span>
                        <span class="status-badge ${report.status}">${formatStatus(report.status)}</span>
                    </div>
                </div>
                <div class="result-message">
                    <i class="fas fa-info-circle"></i>
                    <span>${escapeHtml(report.statusMessage || 'Your report is being processed. Check back later for updates.')}</span>
                </div>
            `;
            
            // Scroll to result
            trackResult.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        // Show error result
        function showError(message) {
            trackResult.classList.remove('hidden');
            trackResult.querySelector('.result-content').className = 'result-content error';
            trackResult.querySelector('.result-content').innerHTML = `
                <div class="result-error">
                    <i class="fas fa-exclamation-circle"></i>
                    <div>
                        <p>${escapeHtml(message)}</p>
                    </div>
                    <button class="close-result" style="margin-left: auto;" onclick="document.getElementById('trackResult').classList.add('hidden')">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
        }
        
        // Escape HTML
        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
    });
</script>
</body>
</html>